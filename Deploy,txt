
# GitHub 토큰을 AWS Secret Manager에서 가져오기
# USE_AWS_SECRETS=true로 설정하거나 AWS 환경에서 실행해야 합니다
GITHUB_TOKEN=$(python3 scripts/get_github_token.py)

$ curl -X POST https://alpha.ai-dev-aws-wizard.ig-pilot.com/api/deploy \
-H "Content-Type: application/json" \
-d '{
      "application": {
        "name": "memo-test1",      // underscore('_') 는 자동으로 hyphen('-') 으로 전환됩니다.
        "deployment_phase": "alpha",
        "github_project_url": "https://github.com/ignite-pilot/memo-test1",
        "github_access_token": "'"$GITHUB_TOKEN"'",
        "health_check_uri": "/api/health"
      }
   }'

# 참고: GitHub 토큰은 AWS Secret Manager "prod/ignite-pilot/github"에서 가져옵니다.
# 로컬 환경에서는 USE_AWS_SECRETS=false로 설정하거나 환경 변수 GITHUB_TOKEN을 사용할 수 있습니다.